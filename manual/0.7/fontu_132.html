<html><head><title>Font utilities</title>
<base href="fontu_132.html">
</head><body>

<big><big><b>Font utilities</b></big></big></p></center>

<A NAME="fontu_132.html"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="fontu_131.html"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="fontu_133.html"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="fontu_127.html"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="fontu_127.html"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="fontu_133.html"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="fontu.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="fontu_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="fontu_140.html">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="fontu_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<HR SIZE=1>
<H2> 16.4 Implementation </H2>
<!--docid::SEC132::-->
<P>

<A NAME="IDX1274"></A>
<A NAME="IDX1275"></A>
<A NAME="IDX1276"></A>
</P><P>

This section describes some of the conventions we used in the
organization of the source code.  See section `Top' in <CITE>GNU Coding Standards</CITE>, for the general GNU conventions.
</P><P>

In our sources, <TT>`.c'</TT> files include <TT>`config.h'</TT> first, which in
turn includes <TT>`global.h'</TT>, which includes <TT>`types.h'</TT> and other
header files which define ubiquitous identifiers.
</P><P>

<A NAME="IDX1277"></A>
<TT>`.h'</TT> files, on the other hand, do not include <TT>`config.h'</TT>.
They only include whatever headers are needed to define what they
themselves use--typically including but not limited to <TT>`types.h'</TT>.
</P><P>

All <TT>`.h'</TT> files are protected with <CODE>#ifndef <VAR>unique-symbol</VAR></CODE>.
</P><P>

The upshot of these conventions is that headers can be included in any
order, as many times as necessary.  In a <TT>`.c'</TT> file, only those
headers which define symbols needed in the C source need be included,
without worrying that some headers depend on others.  (ANSI C defines its
headers to follow these same rules.)
</P><P>

Virtually all <TT>`.c'</TT> files--the only exceptions are (sometimes)
<TT>`main.c'</TT> and some library files--have a corresponding <TT>`.h'</TT>
file, which defines all the public symbols (e.g., non-<CODE>static</CODE>
routines and types). in the <TT>`.h'</TT> file are intended to explain the
external interface; comments in the <TT>`.c'</TT> file assume you already
know what's in the <TT>`.h'</TT> file, to avoid having the same information
in two places, and try to explain only implementation details.
</P><P>

<A NAME="IDX1278"></A>
<A NAME="IDX1279"></A>
<A NAME="IDX1280"></A>
Therefore, a <TT>`.c'</TT> file should always include its corresponding
<TT>`.h'</TT> file, to ensure consistency between the definitions and the
declarations.  GCC 2's <SAMP>`-Wmissing-prototypes'</SAMP> option can be used to
check this.
</P><P>

<A NAME="IDX1281"></A>
<A NAME="IDX1282"></A>
The main program is always in a file named <TT>`main.c'</TT>.  Typically it
loops through all the characters in the input font, doing something with
them.  Parsing arguments is also done in <TT>`main.c'</TT>, in a function
named <CODE>read_command_line</CODE>, using <CODE>getopt</CODE>.  See section <A HREF="fontu_11.html">3.3 Command-line options</A>, for more information on option parsing.
</P><P>

<A NAME="IDX1283"></A>
<A NAME="IDX1284"></A>
The <TT>`configure'</TT> script used to determine system dependencies is
generated by GNU Autoconf from <TT>`configure.in'</TT>.  When
<TT>`configure'</TT> runs, it creates <TT>`include/c-auto.h'</TT> from
<TT>`include/c-auto.h.in'</TT> to record what it discovers.  <TT>`config.h'</TT>
includes this file.
</P><P>

<A NAME="IDX1285"></A>
We access members of most structure types via macros instead of with
<CODE>.</CODE> or <CODE>-&#62;</CODE> directly.  We pass and return whole structures
without hesitation; this has not resulted in any noticeable performance
loss.  When we use pointers to structures, it's almost always because we
need a distinguishable value (i.e., <CODE>NULL</CODE>).
<A NAME="IDX1286"></A>
</P><P>

<A NAME="IDX1287"></A>
When a function has no side effects (e.g., assignments to global
variables), and does not examine any values except its arguments (e.g.
if a pointer is passed, it does not examine the data pointed to),
we declare it <CODE>const</CODE>.  (This is a GNU C extension.)
<A NAME="Copying"></A>
<HR SIZE=1>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="fontu_131.html"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="fontu_133.html"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="fontu_127.html"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="fontu_127.html"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="fontu_133.html"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="fontu.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="fontu_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="fontu_140.html">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="fontu_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>



<br clear=all></p>
</body></html>

